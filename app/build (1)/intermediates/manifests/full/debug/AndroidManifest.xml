<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.floreaacosmin.notifier"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:maxSdkVersion="19"
        android:minSdkVersion="15"
        android:targetSdkVersion="23" />

    <!--
    The minimum SDK version on which the application will run, 
    	 and the SDK version for which the app was built. These values
    	 are overwritten by the ones in build.gradle (app module).
    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="23" />
    -->


    <!-- Required for fetching feed data. -->
    <uses-permission android:name="android.permission.INTERNET" />
    <!-- Required in order to check the network state. -->
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <permission
        android:name="com.floreaacosmin.notifier.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.floreaacosmin.notifier.permission.C2D_MESSAGE" />

    <meta-data
        android:name="android.support.VERSION"
        android:value="26.0.0-alpha1" />

    <application
        android:name="com.floreaacosmin.app.application.AppBaseApplication"
        android:allowBackup="true"
        android:fullBackupContent="@xml/backup_descriptor"
        android:icon="@drawable/app_icon"
        android:label="@string/app_name"
        android:supportsRtl="false"
        android:theme="@style/app_theme" >

        <!-- Main Activity -->
        <activity
            android:name="com.floreaacosmin.app.activity.AppMainActivity"
            android:label="@string/app_name"
            android:launchMode="singleTask"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!--
             The ContentProvider used to store feed data.The authorities attribute should match the 
        	 AUTHORITY constant defined in the Provider class as that's the authority used with the URIs. 
        	 The name attribute must be the fully qualified class name of the content provider. The 
        	 ContentProvider is not exported, so it will not be accessible outside of this app's package. 
        	 The "authorities" here are defined as part of a ContentProvider interface. It is used here
        	 as an attachment point for the SyncAdapter (see res/xml/synca_dapter.xml).
        -->
        <provider
            android:name="com.floreaacosmin.app.content_provider.AppContentProvider"
            android:authorities="@string/app_content_authority"
            android:enabled="true"
            android:exported="false"
            android:multiprocess="true"
            android:syncable="true" >
        </provider>

        <!--
             The data transfer will run in the background on a different thread from the UI. 
			 To do this, an intent service needs to be setup.
        -->
        <service
            android:name="com.floreaacosmin.app.data_processor.AppDataService"
            android:enabled="true"
            android:icon="@drawable/app_logo"
            android:label="@string/app_name" >
        </service>

        <!-- Firebase InstanceIdService -->
        <service
            android:name="com.floreaacosmin.app.firebase.AppFirebaseInstanceIdService"
            android:exported="false" >
            <intent-filter>
                <action android:name="com.google.firebase.INSTANCE_ID_EVENT" />
            </intent-filter>
        </service>

        <!-- Firebase MessagingService -->
        <service
            android:name="com.floreaacosmin.app.firebase.AppFirebaseMessagingService"
            android:exported="false" >
            <intent-filter>
                <action android:name="com.google.firebase.MESSAGING_EVENT" />
            </intent-filter>
        </service>

        <!--
         FirebaseMessagingService performs security checks at runtime,
             no need for explicit permissions despite exported="true"
        -->
        <service
            android:name="com.google.firebase.messaging.FirebaseMessagingService"
            android:exported="true" >
            <intent-filter android:priority="-500" >
                <action android:name="com.google.firebase.MESSAGING_EVENT" />
            </intent-filter>
        </service>

        <receiver
            android:name="com.google.android.gms.measurement.AppMeasurementReceiver"
            android:enabled="true"
            android:exported="false" >
        </receiver>
        <receiver
            android:name="com.google.android.gms.measurement.AppMeasurementInstallReferrerReceiver"
            android:enabled="true"
            android:permission="android.permission.INSTALL_PACKAGES" >
            <intent-filter>
                <action android:name="com.android.vending.INSTALL_REFERRER" />
            </intent-filter>
        </receiver>

        <service
            android:name="com.google.android.gms.measurement.AppMeasurementService"
            android:enabled="true"
            android:exported="false" />

        <receiver
            android:name="com.google.firebase.iid.FirebaseInstanceIdReceiver"
            android:exported="true"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.floreaacosmin.notifier" />
            </intent-filter>
        </receiver>
        <!--
 Internal (not exported) receiver used by the app to start its own exported services
             without risk of being spoofed.
        -->
        <receiver
            android:name="com.google.firebase.iid.FirebaseInstanceIdInternalReceiver"
            android:exported="false" />
        <!--
 FirebaseInstanceIdService performs security checks at runtime,
             no need for explicit permissions despite exported="true"
        -->
        <service
            android:name="com.google.firebase.iid.FirebaseInstanceIdService"
            android:exported="true" >
            <intent-filter android:priority="-500" >
                <action android:name="com.google.firebase.INSTANCE_ID_EVENT" />
            </intent-filter>
        </service>

        <provider
            android:name="com.google.firebase.provider.FirebaseInitProvider"
            android:authorities="com.floreaacosmin.notifier.firebaseinitprovider"
            android:exported="false"
            android:initOrder="100" />

        <meta-data
            android:name="com.google.android.gms.version"
            android:value="@integer/google_play_services_version" />
    </application>

</manifest>